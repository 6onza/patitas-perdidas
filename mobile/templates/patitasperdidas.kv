MDNavigationLayout:
    ScreenManager:
        id: screen_manager

        # Definir pantallas
        HomeScreen:
            name: "home"
        RegistrarMascotaScreen:
            name: "registrar_mascota"
        MascotasPerdidasScreen:
            name: "mascotas_perdidas"
        BuscarMascotasScreen:
            name: "buscar_mascotas"
        SobreNosotrosScreen:
            name: "sobre_nosotros"
        ContactoScreen:
            name: "contacto"

    MDNavigationDrawer:
        id: nav_drawer

        BoxLayout:
            orientation: "vertical"
            padding: "8dp"
            spacing: "10dp"

            ScrollView:
                MDList:
                    OneLineListItem:
                        text: "Home"
                        on_release:
                            app.change_screen("home")
                    OneLineListItem:
                        text: "Registrar Mascota"
                        on_release:
                            app.change_screen("registrar_mascota")
                    OneLineListItem:
                        text: "Mascotas Perdidas"
                        on_release:
                            app.change_screen("mascotas_perdidas")
                    OneLineListItem:
                        text: "Buscar Mascotas"
                        on_release:
                            app.change_screen("buscar_mascotas")
                    OneLineListItem:
                        text: "Sobre Nosotros"
                        on_release:
                            app.change_screen("sobre_nosotros")
                    OneLineListItem:
                        text: "Contacto"
                        on_release:
                            app.change_screen("contacto")

<HomeScreen>:
    name: "home"
    BoxLayout:
        orientation: "vertical"
        
        MDTopAppBar:
            title: "Patitas Perdidas"
            elevation: 10
            pos_hint: {"top": 1}
            left_action_items: [["menu", lambda x: app.root.ids.nav_drawer.set_state("open")]]
        
        Widget:
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                Rectangle:
                    pos: self.pos
                    size: self.size

                Color:
                    rgba: 103/255., 95/255., 145/255., 1
                Ellipse:
                    pos: self.x - 100, self.center_y - 150
                    size: 200, 200

                Ellipse:
                    pos: self.right - 100, self.center_y - 150
                    size: 200, 200
        
        Image:
            source: "assets/images/background.png"
            size: 600, 600 
            allow_stretch: False  
            keep_ratio: True  
            pos_hint: {"center": (0.5, 0.5)}  

        ScrollView:
            MDLabel:
                text: "Bienvenido a Patitas Perdidas, ayúdanos a encontrar tu mascota."
                halign: "center"
                theme_text_color: "Secondary"

<RegistrarMascotaScreen>:
    name: "registrar_mascota"
    BoxLayout:
        orientation: "vertical"

        MDTopAppBar:
            title: "Registrar Mascota"
            elevation: 10
            pos_hint: {"top": 1}
            left_action_items: [["menu", lambda x: app.root.ids.nav_drawer.set_state("open")]]

        ScrollView:
            BoxLayout:
                orientation: "vertical"
                padding: "20dp"
                spacing: "10dp"
                padding: [0, 40, 0, 0]

                MDLabel:
                    text: "Registra a tu mascota perdida"
                    halign: "center"
                    theme_text_color: "Secondary"
                    font_style: "H5"

                MDTextField:
                    id: name  # Aquí agregamos el id 'name'
                    hint_text: "Nombre"
                    multiline: False
                    size_hint_y: None
                    height: "40dp"

                MDLabel:
                    text: "Tipo de animal"
                    theme_text_color: "Secondary"
                BoxLayout:
                    orientation: "horizontal"
                    MDCheckbox:
                        id: animal_type_gato  # id para el checkbox de gato
                        group: "animal_type"
                        active: True
                    MDLabel:
                        text: "Gato"
                    MDCheckbox:
                        id: animal_type_perro  # id para el checkbox de perro
                        group: "animal_type"
                    MDLabel:
                        text: "Perro"

                MDLabel:
                    text: "Sexo"
                    theme_text_color: "Secondary"
                BoxLayout:
                    orientation: "horizontal"
                    MDCheckbox:
                        id: sex_macho  # id para el checkbox macho
                        group: "sex"
                        active: True
                    MDLabel:
                        text: "Macho"
                    MDCheckbox:
                        id: sex_hembra  # id para el checkbox hembra
                        group: "sex"
                    MDLabel:
                        text: "Hembra"

                MDLabel:
                    text: "¿Tiene chapa?"
                    theme_text_color: "Secondary"
                BoxLayout:
                    orientation: "horizontal"
                    MDCheckbox:
                        id: has_tag_yes  # id para el checkbox sí
                        group: "has_tag"
                        active: True
                    MDLabel:
                        text: "Sí"
                    MDCheckbox:
                        id: has_tag_no  # id para el checkbox no
                        group: "has_tag"
                    MDLabel:
                        text: "No"

                MDTextField:
                    id: color  # id para el campo de color
                    hint_text: "Color"
                    multiline: False
                    size_hint_y: None
                    height: "40dp"

                MDTextField:
                    id: city  # id para el campo de ciudad
                    hint_text: "Ciudad"
                    multiline: False
                    size_hint_y: None
                    height: "40dp"

                MDTextField:
                    id: address  # id para el campo de dirección
                    hint_text: "Dirección"
                    multiline: False
                    size_hint_y: None
                    height: "40dp"

                MDRaisedButton:
                    text: "Seleccionar imagen de mascota"
                    size_hint_y: None
                    height: "50dp"
                    pos_hint: {"center_x": 0.5}
                    on_release: root.show_file_chooser()

                MDLabel:
                    id: file_label
                    text: "No se ha seleccionado archivo"
                    halign: "center"
                    theme_text_color: "Secondary"
                    size_hint_y: None
                    height: "40dp"

                MDRaisedButton:
                    text: "Registrar mascota"
                    size_hint_y: None
                    height: "50dp"
                    pos_hint: {"center_x": 0.5}
                    on_release: root.register_pet()


<MascotasPerdidasScreen>:
    name: "mascotas_perdidas"
    BoxLayout:
        orientation: "vertical"
        
        MDTopAppBar:
            title: "Mascotas Perdidas"
            elevation: 10
            pos_hint: {"top": 1}
            left_action_items: [["menu", lambda x: app.root.ids.nav_drawer.set_state("open")]]
        
        ScrollView:
            BoxLayout:
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height  # Ajustar automáticamente el tamaño vertical

                GridLayout:
                    id: container
                    cols: 2
                    row_default_height: "160dp"  # Altura de cada fila
                    row_force_default: True  # Forzar a que todas las filas tengan la misma altura
                    padding: "12dp"
                    spacing: "12dp"
                    
                    canvas.before:
                        Color:
                            rgb: 0.95, 0.95, 0.95
                        Rectangle:
                            pos: self.pos
                            size: self.size


<BuscarMascotasScreen>:
    name: "buscar_mascotas"
    BoxLayout:
        orientation: "vertical"
        MDTopAppBar:
            title: "Buscar Mascotas"
            elevation: 10
            pos_hint: {"top": 1}
            left_action_items: [["menu", lambda x: app.root.ids.nav_drawer.set_state("open")]]
        
        ScrollView:
            BoxLayout:
                orientation: "vertical"
                size_hint_x: 0.9
                pos_hint: {"center_x": 0.5}
                padding: "20dp"
                spacing: "15dp"

                MDLabel:
                    text: "Filtrar por:"
                    theme_text_color: "Primary"
                    font_style: "H6"
                    size_hint_y: None
                    height: "40dp"

                # Especie
                MDLabel:
                    text: "Especie"
                    theme_text_color: "Secondary"
                    size_hint_y: None
                    height: "30dp"
                
                BoxLayout:
                    orientation: "horizontal"
                    size_hint_y: None
                    height: "40dp"
                    spacing: "20dp"
                    padding: ["10dp", 0, 0, 0]
                    
                    MDCheckbox:
                        id: gato
                        group: "especie"
                        size_hint: None, None
                        size: "48dp", "48dp"
                    MDLabel:
                        text: "Gato"
                        size_hint_x: 0.3
                    MDCheckbox:
                        id: perro
                        group: "especie"
                        size_hint: None, None
                        size: "48dp", "48dp"
                    MDLabel:
                        text: "Perro"
                        size_hint_x: 0.3

                # Sexo
                MDLabel:
                    text: "Sexo"
                    theme_text_color: "Secondary"
                    size_hint_y: None
                    height: "30dp"

                BoxLayout:
                    orientation: "horizontal"
                    size_hint_y: None
                    height: "40dp"
                    spacing: "20dp"
                    padding: ["10dp", 0, 0, 0]
                    
                    MDCheckbox:
                        id: macho
                        group: "sexo"
                        size_hint: None, None
                        size: "48dp", "48dp"
                    MDLabel:
                        text: "Macho"
                        size_hint_x: 0.3
                    MDCheckbox:
                        id: hembra
                        group: "sexo"
                        size_hint: None, None
                        size: "48dp", "48dp"
                    MDLabel:
                        text: "Hembra"
                        size_hint_x: 0.3

                # Condición
                MDLabel:
                    text: "Condición"
                    theme_text_color: "Secondary"
                    size_hint_y: None
                    height: "30dp"

                BoxLayout:
                    orientation: "horizontal"
                    size_hint_y: None
                    height: "40dp"
                    spacing: "20dp"
                    padding: ["10dp", 0, 0, 0]
                    
                    MDCheckbox:
                        id: con_chapa
                        group: "condicion"
                        size_hint: None, None
                        size: "48dp", "48dp"
                    MDLabel:
                        text: "Con chapa"
                        size_hint_x: 0.3
                    MDCheckbox:
                        id: sin_chapa
                        group: "condicion"
                        size_hint: None, None
                        size: "48dp", "48dp"
                    MDLabel:
                        text: "Sin chapa"
                        size_hint_x: 0.3

                # Ciudad
                MDLabel:
                    text: "Ciudad"
                    theme_text_color: "Secondary"
                    size_hint_y: None
                    height: "30dp"

                MDTextField:
                    id: ciudad
                    hint_text: "Ingresa una ciudad"
                    mode: "rectangle"
                    size_hint_y: None
                    height: "40dp"

                # Dirección
                MDLabel:
                    text: "Dirección"
                    theme_text_color: "Secondary"
                    size_hint_y: None
                    height: "30dp"

                MDTextField:
                    id: direccion
                    hint_text: "Ingresa una dirección"
                    mode: "rectangle"
                    size_hint_y: None
                    height: "40dp"

                # Botón Buscar
                MDRaisedButton:
                    text: "Buscar"
                    size_hint_y: None
                    height: "50dp"
                    size_hint_x: None
                    width: "200dp"
                    pos_hint: {"center_x": 0.5}
                    md_bg_color: app.theme_cls.primary_color
                    on_release: app.search_pets()

                Widget:
                    size_hint_y: None
                    height: "20dp"

<SobreNosotrosScreen>:
    name: "sobre_nosotros"
    BoxLayout:
        orientation: "vertical"

        MDTopAppBar:
            title: "Sobre Nosotros"
            elevation: 10
            pos_hint: {"top": 1}
            left_action_items: [["menu", lambda x: app.root.ids.nav_drawer.set_state("open")]]
        
        ScrollView:
            BoxLayout:
                orientation: "vertical"
                padding: "20dp"
                spacing: "10dp"
                
                MDLabel:
                    text: "Nuestra misión es ayudar a reunir a las mascotas perdidas con sus dueños."
                    halign: "center"
                    theme_text_color: "Secondary"
                    font_style: "H5"
                
                MDLabel:
                    text: "Trabajamos con amor y dedicación para que ninguna mascota se quede sin hogar."
                    halign: "center"
                    theme_text_color: "Secondary"
                
                Image:
                    source: "assets/images/background.png"
                    size_hint: (None, None)
                    size: (200, 200)
                    pos_hint: {"center_x": 0.5}
                
                MDLabel:
                    text: "Si tienes alguna pregunta o deseas colaborar con nosotros, no dudes en contactarnos."
                    halign: "center"
                    theme_text_color: "Secondary"
                
                MDRaisedButton:
                    text: "Visita nuestra web"
                    size_hint: None, None
                    size: "250dp", "50dp"
                    pos_hint: {"center_x": 0.5}
                    md_bg_color: [103/255., 95/255., 145/255., 1]
                    on_release: root.open_website()  


<ContactoScreen>:
    name: "contacto"
    BoxLayout:
        orientation: "vertical"

        MDTopAppBar:
            title: "Contacto"
            elevation: 10
            pos_hint: {"top": 1}
            left_action_items: [["menu", lambda x: app.root.ids.nav_drawer.set_state("open")]]

        ScrollView:
            BoxLayout:
                orientation: "vertical"
                padding: "20dp"
                spacing: "20dp"

                MDLabel:
                    text: "¡Hablemos via Email!"
                    font_style: "H5"
                    halign: "center"
                    theme_text_color: "Primary"
                    size_hint_y: None
                    height: "40dp"

                MDTextField:
                    id: name
                    hint_text: "Ingrese su nombre"
                    mode: "rectangle"
                    size_hint_x: None
                    width: "300dp"
                    pos_hint: {"center_x": 0.5}

                MDTextField:
                    id: email
                    hint_text: "Ingrese su email"
                    mode: "rectangle"
                    size_hint_x: None
                    width: "300dp"
                    pos_hint: {"center_x": 0.5}

                MDTextField:
                    id: message
                    hint_text: "Escriba su mensaje aquí"
                    mode: "rectangle"
                    size_hint_x: None
                    width: "300dp"
                    height: "100dp"
                    multiline: True
                    pos_hint: {"center_x": 0.5}

                MDRaisedButton:
                    text: "Enviar mensaje"
                    size_hint_x: None
                    width: "200dp"
                    pos_hint: {"center_x": 0.5}
                    on_release: root.send_contact_data()

                MDLabel:
                    text: "O hablemos por:"
                    halign: "center"
                    theme_text_color: "Secondary"
                    size_hint_y: None
                    height: "40dp"

                BoxLayout:
                    orientation: "horizontal"
                    size_hint_y: None
                    height: "60dp"
                    spacing: "20dp"
                    pos_hint: {"center_x": 0.5}

                    MDRaisedButton:
                        text: "WhatsApp"
                        icon: "whatsapp"
                        text_color: 1, 1, 1, 1
                        md_bg_color: app.theme_cls.primary_color
                        pos_hint: {"center_x": 0.5}

                    MDRaisedButton:
                        text: "Instagram"
                        icon: "instagram"
                        text_color: 1, 1, 1, 1
                        md_bg_color: app.theme_cls.primary_color
                        pos_hint: {"center_x": 0.5}

